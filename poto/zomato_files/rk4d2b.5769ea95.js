(this.$WP=this.$WP||[]).push(["rk4d2b",(a,e)=>{"use strict";var r,n,t,i,l,d,o,c,s,u,_,f,v,b,g,h,y,m,p,k=a=>u(l,"RESTAURANT"===a?{id:"announcement_banner_covid19_health_measures"}:{id:"announcement_banner_covid19_health_measures_apr"}),S=a=>u(l,"RESTAURANT"===a?{id:"announcement_banner_covid19_restaurant_note_only"}:{id:"announcement_banner_covid19_apr_note_only"}),I=({hasSafetyTags:a,locationType:e})=>{var r=d(),n=(a,e)=>{r({module:"announce_banner",action:a,context:e})},l=c("COVID19")-s,o=t((()=>n("in_view","")));return u("div",{ref:o,className:"GgcKS S4 H3",children:_("div",{className:"XTcMt",children:[u("div",{className:"yluUP PP"}),_("div",{className:"QUPUW",children:[u("span",{className:"IhtiT",children:a?k(e):S(e)}),_("a",{href:"#SAFETY_ANCHOR",onClick:a=>{l>0&&(n("click","read_more"),window.scrollTo({top:l,behavior:"smooth"}),a.preventDefault())},className:"VZbIu",children:[u(i,{id:"b2bh_covid_read_more"})," "]})]})]})})},w={__key:0x64b3ad37cc4f,id:"64b3ad37cc4f0af7b201137fba82659e",loc:{},definitions:[]},T={__key:88051535684461,id:"50151881a36deb25c1cb0d4f0658b969",loc:{},definitions:[]},N=({message:a,tooltip:e,cta:r})=>_("div",{className:"UHLdR S4",children:[a&&u("span",{className:"SSlhQ",children:a}),e&&u(b,{below:!0,message:e,children:a=>_("span",{ref:a,children:[" ",u(g,{color:"primaryIcon"})]})}),r&&_(f,{children:[u("span",{className:"yQGWc"}),u("span",{className:"zcngG b Wb",children:r})]})]}),R=a=>{switch(a){case"OWNER":return 0;case"SCRAPER":return 2;default:return 1}},U=({locationId:a,giftCardUrl:e,trackingData:r})=>{var n=e?"update":"add",t=o({...r,action:`covid19_${n}_giftcard_alert_impression`});v((()=>{t()}),[t]);var d=o({...r,action:`covid19_${n}_giftcard_alert_click`});return u(y,{message:u(l,{id:"covid19_rr_restaurant_owner_gift_card",args:{boldStart:"<b>",boldEnd:"</b>"}}),cta:u("a",{href:`/ManageListing-d${a}#/general`,onClick:d,children:u(i,e?{id:"covid19_rr_restaurant_owner_update_giftcard"}:{id:"covid19_rr_restaurant_owner_add_giftcard"})})})},A=({giftCardUrl:a,trackingData:e})=>{var r=o({...e,action:"covid-19-gift-card-alert-shown"});v((()=>{r()}),[r]);var n=o({...e,action:"covid-19-gift-card-alert-click"}),t=u(i,{id:"covid19_restaurant_gift_card_info"});return u(y,a?{message:u(l,{id:"covid19_restaurant_gift_card2",args:{boldStart:"<b>",boldEnd:"</b>"}}),tooltip:t,cta:u("a",{href:a,target:"_blank",onClick:n,children:u(i,{id:"covid19_purchase_online_gift_card"})})}:{message:u(l,{id:"covid19_purchase_offline_gift_card2",args:{boldStart:"<b>",boldEnd:"</b>"}}),tooltip:t})},C=({locationId:a})=>{var e,n,t,i,l,d,o={module:"Restaurant_Review",context:String(a),action:""},[c]=r({query:w,variables:{locationId:a}}),s=null==(e=c.data)||null==(n=e.ownerPropertiesForUserLocation)?void 0:n.ownerStatus,_=null!=s&&"NOT_AN_OWNER"!==s,[f]=r({query:T,variables:{locationId:a}}),v=null==(t=f.data)||null==(i=t.Menus_getGiftcards)?void 0:i[0],b=null==v||null==(l=v.ownerIndicator)?void 0:l.hasOwnerVerifiedGiftcard,g=null==(d=((null==v?void 0:v.urls)||[]).reduce(((a,e)=>!a||R(a.updatedBy)>R(null==e?void 0:e.updatedBy)?e:a),null))?void 0:d.url;if(!f.fetching){if(_)return u(U,{locationId:a,giftCardUrl:g,trackingData:o});if(null==b&&g||b)return u(A,{giftCardUrl:g,trackingData:o})}return null},E={__key:0x8ae74022a221,id:"8ae74022a221ef5304344d48714e615f",loc:{},definitions:[]},D=({takoutStatus:a})=>{if(!a||!a.deliveryTakeoutOnly)return null;var e,{endDate:r}=a;if(r){if(((a=>{if(!a)return null;var e=a.split("-");if(3===e.length){var r=parseInt(e[0],10),n=parseInt(e[1],10),t=parseInt(e[2],10);if(r&&n&&t)return new Date(r,n-1,t)}return null})(r)||new Date)<new Date)return null;e=u(l,{id:"eat_r_covid19_banner_takeout_only_date_v1",args:{date:r}})}else e=u(l,{id:"eat_r_covid19_banner_takeout_only_v1"});return u(y,{message:e})},O=({locationId:a})=>{var[{error:e,data:n}]=r({query:E,variables:{lid:{locationId:a}}});if(e)return null;var t=null==n?void 0:n.RestaurantCommerceSelection_getDeliveryTakeoutOnlyStatus;return t?u(D,{takoutStatus:t}):null},q={__key:33298249195435,id:"1e48da509fab3bf23f2aef26db3824fd",loc:{},definitions:[]},P=()=>{var a,e,t,i,l,d=n().params.detailId||0,[{data:o,fetching:c,error:s}]=r({query:q,variables:{locationId:d,includeUnavailableTags:!1}}),v=null==o||null==(a=o.safetyInfo)||null==(e=a[0])||null==(t=e.managementResponse)?void 0:t.body,b=null==o||null==(i=o.safetyInfo)||null==(l=i[0])?void 0:l.safetyTags,g=b&&b.length>0,y=v?(a=>{try{return JSON.parse(a)}catch(a){return console.error("Invalid json was received",a),{}}})(v):null,k=y&&"covid-19"===y.type&&y.body;return c||s||!g&&!k?_(f,{children:[u(p,{locationId:d}),u(m,{locationId:d})]}):u(h,{hasSafetyTags:!!g,locationType:"RESTAURANT"})};return[()=>{h=I,y=N,m=C,p=O,a("default",P)},[a=>r=a.useQuery,a=>n=a.useRoute,a=>t=a.useOnVisible,a=>(i=a.default,l=a.UnsafeLocalize),a=>(d=a.useGARecorder,o=a.useGARecordCallback),a=>c=a.getTabLocation,a=>s=a.STICKY_NAV_OFFSET,a=>(u=a.jsx,_=a.jsxs,f=a.Fragment),a=>v=a.useEffect,a=>b=a.default,a=>g=a.default]]},["1mqwhq","fgwvq1","13btuy","17thqz","32pwc7","azylvk","tl3yll","121h32","1o4yt4","wt5b21","zq967r"]]);

(this.$WP=this.$WP||[]).push(["g5mqn8",(e,a)=>{"use strict";var r,i,l,n,s,o,t,c,d,f,p,_,u,m,h,v,g,b,k,O,I,N,T,y,C,L,S,R,w,x,P,E,A,M,z,B,$,U,D,F,j,Q,K,W,q,G=({context:e,impressionId:a,payload:r,offerlessCommerceTrackUrl:i,baLinkUid:l,children:n})=>u(f,{clickType:"specialOffer",impressionId:a,context:e,payload:r,offerlessCommerceTrackUrl:i,baLinkUid:l,children:e=>n(e)}),H=e=>{var a={};return e.forEach((e=>{var{contactLinkType:r}=e;r in a||(a[r]=e)})),a},V={container:"mydrN",center_text:"xQKQn",left_text:"mNmQt",solidUnderline:"YRIxQ",ui_link:"TeOIs",level_5:"rUOnQ",level_4:"Isjqe",level_3:"gWsOr",level_2:"izRjg",level_1:"PgaKt",special_offer_red_border_wrapper:"xQram c Pa PP Pn PC _S",special_offer_ds_red_border_wrapper:"hzsTb c Pa PP Pn PC _S",offer:"qZLBT _S",link:"KRAVz",lead_in:"b",specialIcon:"ACCYJ d b",ds_red:"wvrCK",red:"jpMGI",black:"MvPXk"},Y=e=>"DS_RED"===e?V.ds_red:"RED"===e?V.red:V.black,J=e=>{var{localize:a}=t();return u(U,{...e,localize:a})},Z=({coupon:e})=>{var[a,r]=i(!1),l=v(),{localize:n}=t(),o=g()||-1;if(!e)return null;var f=e.headingForTeaser;return m(h,{children:[m("div",{className:"f u",onClick:()=>{r(!0),l({module:"restaurants_special_offer",action:"click",context:o?o.toString():""})},children:[u("div",{className:"UlSkm",children:m("span",{className:c("wGyzR _S"),children:[n("b2bh_so_special_offer"),u("div",{className:"PKjZM b",children:f})]})}),u("div",{className:"dahJk _T",children:u("div",{className:"XuOaS",children:u(s,{name:"single-chevron-right"})})})]}),a?u(d,{onClose:()=>{r(!1)},specialOfferId:e&&e.specialOfferId,lightboxType:"restaurant"}):""]})},X="lmtpd",ee="TKrhR F0 _m",ae=({coupon:e,showDescription:a,fetching:r})=>{var{page:l,path:n}=b(),s=k(),[o,c]=i(!1),f=y(),{localize:p}=t(),_=g()||-1;if(r)return m(h,{children:[m("div",{className:X,children:[u(O,{variant:"accent",children:p("b2bh_so_special_offer")}),u("img",{className:ee,src:`${s}/img2/brand_refresh/Tripadvisor_logoset_solid_green.svg`,alt:""})]}),u(T,{height:"20px",width:"100%",marginTop:"5px"}),a&&u(T,{height:"40px",width:"100%",marginTop:"15px"})]});var v=e.rawHeading,C=a?e.restrictions:null;return m(h,{children:[m("div",{className:X,children:[u(O,{variant:"accent",children:p("b2bh_so_special_offer")}),u("img",{className:ee,src:`${s}/img2/brand_refresh/Tripadvisor_logoset_solid_green.svg`,alt:""})]}),u(I,{onClick:()=>{c(!0),f({itemName:"so_b2c_click_commerce_card",actionType:"click",team:"Restaurants",locationId:_,page:l,customData:JSON.stringify({url:n,specialOfferId:e.specialOfferId})})},leftAlign:!0,children:v}),C&&u("div",{className:"PbmPP",children:u(N,{variant:"body-01",color:"primaryText",children:C})}),o?u(d,{onClose:()=>{c(!1)},specialOfferId:e&&e.specialOfferId,lightboxType:"restaurant"}):""]})},re=e=>{var a=e.page.detailId,{sponsoredListingLocationIdAttribution:r,page:i}=e.route;return{locationId:a,isRestaurant:"Restaurant_Review"===i,trafficSource:r===a?"sp":"ba",isMobile:"MOBILE"===e.meta.device.viewportCategory,servletName:e.meta.initialServletName||""}},ie={__key:0x670acc70902c,id:"670acc70902c3083294d3b3e4c878a71",loc:{},definitions:[]},le=({locationId:e,status:a,locale:r,children:i,specialOfferLocationId:l})=>u(L,{query:ie,variables:{locationId:l||e,status:a,locale:r},children:({fetching:a,data:r,error:l})=>{var n,s,o;l&&console.error(`Error getting special offer data for location ${e}: ${JSON.stringify(l)}`);var{specialOffers:t}=(null==r||null==(n=r.BaSpecialOffers_findSpecialOffersByLocationIds)?void 0:n[0])||{},c=0===(null==t?void 0:t.length)?null:null==r||null==(s=r.BaSpecialOffers_findSpecialOffersByLocationIds)||null==(o=s[0])?void 0:o.locationId;return i(c,t,a)}}),ne=e=>{var a=e.page.detailId,{locale:r}=e.i18n;return{locationId:a,status:"ENABLED",locale:r}},se={offer:"gZwVG H3 f u",common:"OeQeO",about:"dMmpW",aboutHighlighted:"IQlFY",location:"FUyxx",overview:"TeYcL Pc PN Pp PA",overview_light:"ajctW Pc PN Pp PA",overviewOffer:"uRxOx",webLinkText:"FfTzs",mediaViewer:"sEARN",webLink:"AdeBt _S",atfInfo:"ERCyA",hrMeta:"QGKZt",nonWebLink:"oAPmj _S",nonWebLinkText:"KledE",outboundIcon:"QNPJe",offerIcon:"dviEW H3",messenger:"IclGN",partnerLogoImages:"f j u",centerContent:"c",logo_img:"nnFPB",mobile_logo_img:"JUvns",ui_link_container:"YUQUy",level_5:"FTejJ",level_4:"PTrfg",level_3:"Kbmhx",level_2:"rLVaA",level_1:"kYotk",ui_link:"fHvkI"},oe="jzAVp",te="tQDKm",ce=e=>{var{localize:a}=t();return u(D,{...e,localize:a})},de=({locationId:e,otaLink:a,linkLevel:r,icon:l})=>{var n,d=null==a?void 0:a.linkUrl,f=E(d),{localize:h}=t(),g=v(),b="MOBILE"===z(),k=(e,a)=>{g({module:"ba_for_otas_test",action:e,context:a})},[O,N]=i(!1),T=P((()=>{k("test_impression",e.toString())})),y=p("URL_PARTNER_VISIT",h);function C(){return()=>{k("b4o_link_return",f||d),N(!1)}}function L(){return()=>{k("b4o_link_redirect",f||d),N(!0)}}return u("div",{className:c(se.offer,se.atfInfo),ref:T,children:m("div",{className:c(se.webLink,`${se.ui_link_container} ${se[r]}`),children:[u(s,{name:l,className:se.offerIcon,onClick:L()}),u("span",{className:c(se.webLinkText,`${se.ui_link} ${se[r]}`),onClick:L(),children:y}),O&&u(A,{mobileContainerStyle:"inset",onClose:C(),children:m("div",{children:[u("div",{className:c(se.centerContent),dangerouslySetInnerHTML:{__html:h.string("meta_interstitial_connecting")}}),m("div",{className:c(se.partnerLogoImages),children:[u("img",{alt:"tripadvisor.com",className:c(b?se.mobile_logo_img:se.logo_img),src:"img2/brand_refresh/Tripadvisor_lockup_horizontal_registered.svg"}),u(B,{color:"taBrand"}),u("img",{className:c(b?se.mobile_logo_img:se.logo_img),src:"img2/branding/hotels/Agoda.png",alt:"Agoda.com"})]}),u("div",{className:c(se.centerContent),children:u(I,{onClick:C(),children:u(o,{id:"flights_app_return_to_tripadvisor"})})}),u(M,{interval:3e3,trigger:(n=f,()=>{k("b4o_link_click",f||d),n?window.open(n,"_blank"):d&&window.open(d,"_blank"),N(!1)})})]})}),u("span",{className:se.outboundIcon,children:u(_,{})})]})})},fe={__key:0xe59bbbba6f8e,id:"e59bbbba6f8ecfd0b3a833d55c1f85dd",loc:{},definitions:[]},pe=()=>{var e=$({experimentKeys:["ba_for_otas_agoda__1667230815"]});return!(!e||null==e||!e.ba_for_otas_agoda__1667230815)&&"control"!==(null==e?void 0:e.ba_for_otas_agoda__1667230815)},_e=(e,a,r,i,l)=>{var n,s=pe(),o={locationId:e,commerceCountryId:a,deviceType:r,trafficSource:"ba",servletName:i,hotelTravelInfo:l},[{data:t}]=S({query:fe,variables:o,pause:!s});return{otaData:null==t||null==(n=t.BaAggregation_productDataBulkForOtaTest)?void 0:n[0]}};return[()=>{G.defaultProps={context:void 0},F=G,(U=class extends r{constructor(...e){super(...e),this.state={baLinkUid:n(),showSpecialOffer:!1},this.renderSpecialOfferOverlay=()=>{this.setState({showSpecialOffer:!0})},this.renderSpecialOfferLightbox=e=>this.state.showSpecialOffer?u(d,{onClose:()=>{this.setState({showSpecialOffer:!1})},specialOfferId:e&&(e.id||e.specialOfferId)}):"",this.renderInnerContent=(e,a,r,i,l)=>{var{iconAndLeadInTextColor:n,icon:o,linkLevel:t,onClick:d,linkSolidUnderline:f,textAlignment:p="LEFT"}=this.props,_=((e,a,r,i)=>{var l=()=>{a(),i(),r&&r()};return e?{wrapperClickMethod:l,innerOfferClickMethod:null}:{wrapperClickMethod:null,innerOfferClickMethod:l}})(l,e,d,this.renderSpecialOfferOverlay);return u("div",{className:c({[V.special_offer_red_border_wrapper]:"RED_BORDER"===i,[V.special_offer_ds_red_border_wrapper]:"DS_RED_BORDER"===i}),onClick:_.wrapperClickMethod,children:m("div",{className:c(V.container,{[V.center_text]:"CENTER"===p,[V.left_text]:"LEFT"===p}),children:[u(s,{name:o,className:c(V.specialIcon,Y(n))}),m("span",{className:c(V.offer,t&&`${V.ui_link} ${V[t]}`,f?V.solidUnderline:""),onClick:_.innerOfferClickMethod,children:[u("span",{className:c("blOfferLead",V.lead_in,Y(n)),"data-blspecialoffer":"lead",children:r}),u("span",{className:V.link,"data-blspecialoffer":"link",children:a})]})]})})}}render(){var{locationId:e,coupon:a,leadInText:r,layout:i,linkTextOverride:l,wrapperStyle:n,expandedClickableArea:s}=this.props,o=a;if(!o)return null;var t,c=a&&a.offerlessCommerceTrackUrl||a&&a.lightboxClickUrl||"",d=l||o.linkText||o.headingForTeaser;return"string"==typeof r?t=r:(t=o.leadIn||((e,a)=>{switch(e){case"CREATE_YOUR_OWN":case"BOTTLE_OF_WINE":case"FREE_PARKING":case"LOYALTY_POINTS":case"PACKAGE":return a.string("SO_recat_headline_specialOfferHeader_e1f");case"ROOM_PERCENT_OFF":case"ROOM_AMOUNT_OFF":return a.string("SO_recat_headline_specialPrice_e1f");case"ROOM_SPECIAL_RATE":case"ROOM_UPGRADE":return a.string("SO_recat_headline_specialRateHeader_e1f");case"FOOD_CREDIT":case"FREE_BREAKFAST":case"FREE_TICKETS":return a.string("SO_recat_specialDealHeader_e1f");default:return""}})(o.specialOfferType,this.props.localize),t+=d?":":""),m(h,{children:[u(F,{impressionId:o.impressionId,payload:{locationId:e,couponId:a&&(a.id||a.specialOfferId),specialOfferType:o.trackingName||o.specialOfferType||"INVALID",layout:i},offerlessCommerceTrackUrl:c,baLinkUid:this.state.baLinkUid,children:e=>this.renderInnerContent(e,d,t,n,s)}),this.renderSpecialOfferLightbox(a)]})}}).defaultProps={icon:"special-offer-fill",wrapperStyle:"NONE",expandedClickableArea:!1},j=l((e=>({lineItemsByLoc:e.meta.lineItemsByLoc})))(J),Q=Z,K=ae,W=l(re)(C),q=l(ne)(le),(D=class extends r{constructor(...e){super(...e),this.state={mapRadio:null},this.openMap=()=>{this.state.mapRadio&&this.state.mapRadio.emit("open-trigger-clicked")},this.renderMapLink=()=>{var{layout:e,disableMap:a}=this.props;return"location"===e||"atfInfo"===e||a?null:u("span",{className:"hwpEh _S",children:this.props.localize("mw_common_seeOnMap_ffffec3e")})}}componentDidMount(){this.setState({mapRadio:x("hr-map")})}render(){var{address:e,userLanguage:a,layout:r,disableMap:i,isDsStyle:l,linkLevel:n}=this.props,o=e&&e.localAddress&&e.localLanguage&&e.localLanguage!==a,t=n?`${se.ui_link_container} ${se[n]}`:"";return m(h,{children:[e.address?m("div",{className:c(se.offer,se[r]),children:[u(s,{name:"map-pin-fill",className:se.offerIcon}),m("span",{onClick:i?()=>{}:this.openMap,className:c({[`${se.nonWebLink} ${t}`]:!i}),children:[l?u(N,{elementType:"span",variant:"body-01",children:e.address}):u("span",{className:!i&&n?`${se.ui_link} ${se[n]}`:"",children:e.address}),this.renderMapLink()]})]}):null,o?m("div",{className:c(se.offer,se[r]),children:[u(s,{name:"refresh",className:se.offerIcon}),u(w,{name:`overlay-localAddress-${se[r]}`,children:e=>u("span",{onClick:e,className:c(se.nonWebLink,t),children:u("span",{className:c(se.nonWebLink,n?`${se.ui_link} ${se[n]}`:""),children:this.props.localize("localnameandaddress_1")})})}),u(R,{name:`overlay-localAddress-${se[r]}`,disableFullscreenOnMobile:!0,children:m("div",{className:"nJnaZ c",children:[u("div",{className:"IWqGZ",children:this.props.localize("localnameandaddress_1")}),u("div",{className:oe,children:`${this.props.localize.string("local-name-and-address_localname")}${this.props.localize.string("common_colon")}`}),u("div",{className:te,children:e.localName||e.name}),u("div",{className:oe,children:`${this.props.localize.string("local-name-and-address_localaddress")}${this.props.localize.string("common_colon")}`}),u("div",{className:te,children:e.localAddress})]})})]}):null]})}}).defaultProps={layout:"overview",disableMap:!1,isDsStyle:!1},e({Address:ce,BaOtaLink:de,BaOtaQuery:fe,BaOtaQueryWrapper:_e,BusinessAdvantageProvider:W,IsBaOtaTestEnabled:pe,RestaurantSpecialOffer:Q,RestaurantSpecialOfferDesktop:K,SpecialOffer:j,SpecialOfferProvider:q,remapContacts:H})},[e=>(r=e.Component,i=e.useState),e=>l=e.connect,e=>n=e.uuid,e=>s=e.Icon,e=>(o=e.default,t=e.useLocalize),e=>c=e.default,e=>d=e.default,e=>(f=e.ClickTracker,p=e.offerTextFromContactType,_=e.OutboundIcon),e=>(u=e.jsx,m=e.jsxs,h=e.Fragment),e=>v=e.useGARecorder,e=>g=e.useLocationDetail,e=>b=e.useRoute,e=>k=e.useCdnPrefix,e=>O=e.default,e=>I=e.BorderlessButton,e=>N=e.default,e=>T=e.default,e=>y=e.default,e=>C=e.BusinessAdvantageProvider,e=>(L=e.Query,S=e.useQuery),e=>R=e.Modal,e=>w=e.Opener,e=>x=e.createRadio,e=>P=e.useOnVisible,e=>E=e.useObfuscatedUrl,e=>A=e.ModalContainer,e=>M=e.default,e=>z=e.useViewportCategory,e=>B=e.default,e=>$=e.default]]},["1o4yt4","12mj4n","1eww82","1ybxsm","17thqz","fkji80","r9zz7r","1t9pxn","121h32","32pwc7","bvvaww","fgwvq1","1s6q22","oz3g7e","jppfwt","1essqv","u59av4","1r73jw","1l82a9","1mqwhq","18m6oj","80hn7v","1bqgab","13btuy","ay1l3c","1i3sz5","18gzfc","1ys6v1","1bqhoe","gugp1d"]]);

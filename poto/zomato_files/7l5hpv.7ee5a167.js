(this.$WP=this.$WP||[]).push(["7l5hpv",(e,l)=>{"use strict";var t,a,n,i,r,u,o,s,d,c,T,y,p,I,h,O,g,R,E,S,A,_="0123456789ABCDEF",m=e=>{var l=t(e||"");if(""===l.current){var a=Array(32).fill(0).map((()=>_[Math.floor(Math.random()*_.length)])).join("");l.current=`${a}${String(Date.now())}ssid`}return l.current},N=(e,l,t,i,u,o,s)=>{var d=r(),{page:c}=d,[y,p]=a(""),[I,h]=a(i),O=T(),g=null!=u.geoId&&u.geoId>1?u.geoId:1,R=n((()=>{h(i);var l=String(Date.now());p(l),O({Typeahead:{startEvent:{typeaheadId:l,searchSessionId:e,uiOrigin:t,scope:String(g),page:c,beforeQuery:i,afterQuery:i,totalNum:o}}})}),[t,e,i,h,g,c,O,o]),E=n(((a,n,r,u,d,T,p,h)=>{O({Typeahead:{selectEvent:{typeaheadId:y,searchSessionId:e,resultsId:l,uiOrigin:t,scope:String(g),page:c,beforeQuery:I,afterQuery:i,totalNum:o,value:T,errors:s?[s]:null,fromHistory:n,selDepth:r+1,placeType:p||null,dataType:d,selectionUrl:h||null,selectionMethod:a,selectedDocumentId:T,durationResultsShown:u?Date.now()-u:-1}}})}),[t,e,l,i,I,g,y,o,s,O,c]);return{logTypeaheadOpened:R,logResultSelection:n(((e,l,t,a,n)=>{E(e,l,a,n,t.trackingType,t.key,t.trackingPlaceType||null,t.url)}),[E]),logQuickLinkSelection:n(((e,l,t,a)=>{E(e,!0,-1,l,"QUICK_LINK",`QUICK_LINK_${t}`,t,a)}),[E]),logSearchAction:n((a=>{O({Typeahead:{searchEvent:{typeaheadId:y,searchSessionId:e,resultsId:l,uiOrigin:t,scope:String(g),page:c,beforeQuery:I,afterQuery:i,totalNum:o,errors:s?[s]:null,durationResultsShown:a?Date.now()-a:-1}}})}),[t,e,l,i,I,g,y,o,s,c,O]),startQuery:I,typeaheadId:y}},v={__key:0x5eec1d8288aa,id:"5eec1d8288aa8741918a2a5051d289ef",loc:{},definitions:[]},L=(e,l,t)=>{var a=null!=t.latitude&&null!=t.longitude,n={q:e,searchSessionId:l,searchNearby:a?"true":"",latitude:null!=t.latitude?String(t.latitude):"",longitude:null!=t.longitude?String(t.longitude):"",geo:a?"":String(t.geoId)};return`/Search?${new URLSearchParams(n).toString()}`},f=["ACCOMMODATION","EATERY","ATTRACTION","CAR_RENTAL_OFFICE"],C=(e,l,t)=>{var a=[];if(!e||!e.Typeahead_autocomplete||!e.Typeahead_autocomplete.results)return{results:a,resultsId:""};var{results:n,resultsId:i}=e.Typeahead_autocomplete,r=n.reduce(((e,l)=>{var t,a,n;if("Typeahead_LocationItem"===(null==l?void 0:l.__typename)&&null!=(null==(t=l.details)?void 0:t.placeType)&&null!=l.details.localizedName&&null!=(null==(a=l.details.locationV2)||null==(n=a.names)?void 0:n.longOnlyHierarchyTypeaheadV2)&&null!=l.locationId){var{locationId:i}=l,{localizedName:r,placeType:u}=l.details,o=l.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=o){var s=r+o+u;if(!Object.keys(e).includes(s)){var d={};d[s]=[],Object.assign(e,d)}e[s].push(i)}}return e}),{}),u=Object.values(r).filter((e=>Array.isArray(e)&&e.length>1)).flatMap((e=>e)),s=e=>{var l,t;if(null!=e.locationId&&null!=(null==(l=e.details)||null==(t=l.locationV2)?void 0:t.names)){var a=null!=e.details.placeType&&f.includes(e.details.placeType)&&null!=e.details.streetAddress&&null!=e.details.streetAddress.street1&&u.includes(e.locationId)?e.details.streetAddress.street1:null,n=e.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=n)return null==a?n:`${a}, ${n}`}return null},d=e=>{var{highlightingInfo:l}=e;if(!l||!l.length)return null;for(var t=[],a=0;a<l.length;a++){var n=l[a];if(!n)return console.error("Typeahead highlighting info is not expected to have null elements"),null;t.push(n)}return t};return n.forEach((e=>{if(null!=e){var n=null;switch(e.__typename){case"Typeahead_LocationItem":n=(e=>{if(null!=e.locationId&&e.details&&null!=e.details.localizedName&&null!=e.details.url){var l,a,n,i=!e.details.isGeo,r=((e,l)=>{var t,a,n,i;return e.linkType?"VACATION_RENTALS"===e.linkType?null==(a=l.details)||null==(n=a.locationV2)||null==(i=n.vacationRentalsRoute)?void 0:i.url:!0===(null==(t=l.details)?void 0:t.isGeo)?l.details[`${e.linkType}_URL`]:null:null})(t,e);return{searchText:e.details.localizedName,title:e.details.localizedName,highlightingInfo:d(e),url:null!=r?r:e.details.url,image:i?null==(l=e.details.thumbnail)?void 0:l.photoSizeDynamic:null,key:`LOCATION_${e.documentId}`,subtitle:s(e),hierarchy:(null==(a=e.details.locationV2)?void 0:a.hierarchy)||void 0,trackingType:"LOCATION",trackingPlaceType:null==(n=e.details)?void 0:n.placeType,locationId:e.locationId}}return null})(e);break;case"Typeahead_QuerySuggestionItem":n=(e=>{if(null!=e.text){var a,n,i="article"===e.suggestionType,r=null==(a=e.parentGeoDetails)||null==(n=a.names)?void 0:n.longOnlyHierarchyTypeaheadV2,u=i?O:null!=e.buCategory&&S.get(e.buCategory)||h;return{searchText:e.text,title:e.text,highlightingInfo:d(e),subtitle:i?g(o,{id:"typeahead_articles_read_more"}):r,image:null,url:e.route&&e.route.url||L(e.text,l,t),icon:u,trackingType:"QUERY_SUGGESTION",key:e.documentId}}return null})(e);break;case"Typeahead_RescueResultItem":n=(e=>null!=e.text?{searchText:e.text,title:g(o,{id:"see_all_results_for",args:{query:e.text}}),url:L(e.text,l,t),icon:h,trackingType:"SEARCH",key:`SEARCH_${e.documentId}`}:null)(e);break;case"Typeahead_ListResultItem":n=(e=>{if(null!=e.locationId&&null!=e.documentId&&null!=e.listResultType&&null!=e.details&&null!=e.details.localizedName){var l,t,n,i,r,u,s,d,c=e.listResultType;if("/ShowForum"===(d="FORUM"===c?(null==(s=e[`${c}ListURL`])?void 0:s.url)||"":e.details[`${c}ListURL`]||"")||""===d)return null;var T=(()=>{switch(c){case"HOTEL":return g(o,{id:"common_Hotels"});case"RESTAURANT":return g(o,{id:"common_Restaurants"});case"ATTRACTION":return g(o,{id:"common_Thingstodo"});case"FORUM":return g(o,{id:"common_Forums"});default:return""}})();a.push({searchText:(null==(l=e.details)?void 0:l.localizedName)||"",title:g(o,{id:"m2_trips_detail_date_display",args:{0:T,1:(null==(t=e.details)?void 0:t.localizedName)||""}}),subtitle:null!=e.locationId&&null!=(null==(n=e.details)||null==(i=n.locationV2)?void 0:i.names)?e.details.locationV2.names.longOnlyHierarchyTypeaheadV2:null,url:d,icon:h,image:null==(r=e.details)||null==(u=r.thumbnail)?void 0:u.photoSizeDynamic,trackingType:"LIST_RESULT",locationId:e.locationId,key:`LIST_RESULT_${c}_${e.documentId}`})}return null})(e)}n&&(n.label=e.sponsored?g(o,{id:"social_mobile_reason_for_sponsored"}):void 0,a.push(n))}})),{results:a,resultsId:null==i?"unknown":i}},k={results:[],resultsId:""},U={batch:!1},D=["default","love_your_local","insurance_lander"],H=["typeahead-q","articles"],G=(e,l,n,r,o=10,T,y)=>{var[p,I]=a(k),h=R(y),{logTypeaheadOpened:O,logResultSelection:g,logQuickLinkSelection:S,logSearchAction:_,typeaheadId:m}=E(h,p.resultsId,l,e,n,p.results.length),N=((e,l)=>{var[n,r]=a(e),u=t(Date.now());return i((()=>{var l=Date.now(),t=100-(l-u.current);if(t<=0)return u.current=l,void r(e);var a=setTimeout((()=>{u.current=Date.now(),r(e)}),t);return()=>clearTimeout(a)}),[e,100]),n})(e),L=d(),f=s(),C=u(),G=null!=n.latitude&&null!=n.longitude?{latitude:n.latitude,longitude:n.longitude}:null,b=null!=n.geoId?n.geoId:0,P="WORLDWIDE";b>1&&"LocationTypeahead"!==r?P="IN_GEO_EXTEND_WORLDWIDE":b>1&&"LocationTypeahead"===r?P="IN_GEO":null!=G&&(P="NEAR_POSITION_EXTEND_WORLDWIDE");var w=n.pageType,x={listResultType:w,searchSessionId:h,typeaheadId:m,uiOrigin:l,routeUid:C,userLocation:n.userLocation},Q=["LOCATION","QUERY_SUGGESTION","RESCUE_RESULT",...null!=w?["LIST_RESULT"]:[]],V={query:N,limit:o,scope:P,locale:f,scopeGeoId:b,searchCenter:G,types:Q,locationTypes:["GEO","AIRPORT","ACCOMMODATION","ATTRACTION","ATTRACTION_PRODUCT","EATERY","NEIGHBORHOOD","AIRLINE","SHOPPING","UNIVERSITY","GENERAL_HOSPITAL","PORT","FERRY","CORPORATION","VACATION_RENTAL","SHIP","CRUISE_LINE","CAR_RENTAL_OFFICE"],userId:L,context:x,articleCategories:D,enabledFeatures:H};"GeoPicker"===r&&l.includes("RESTAURANTS")||"LinkTypeSearch"===r&&"RESTAURANTS"===n.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD","EATERY"]):"GeoPicker"===r&&l.includes("HOTELS")||"LinkTypeSearch"===r&&"HOTELS"===n.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD","ACCOMMODATION"]):"GeoPicker"===r&&l.includes("ATTRACTIONS")||"LinkTypeSearch"===r&&"ATTRACTIONS"===n.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","ATTRACTION","ATTRACTION_PRODUCT","NEIGHBORHOOD"]):"GeoPicker"===r?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD"]):"LocationTypeahead"===r&&(V.types=["LOCATION"],T&&(V.locationTypes=T));var[{data:$,error:M},q]=c({query:v,variables:{request:V},context:U,pause:!0}),z=t(q);return i((()=>{z.current=q})),i((()=>{if(!M){var e=A($,h,n);I(e)}}),[$,M,h,n]),i((()=>{(e=>e&&e.length>=1)(N)?z.current():I(k)}),[N]),{results:p,logTypeaheadOpened:O,logResultSelection:g,logQuickLinkSelection:S,logSearchAction:_,searchSessionId:h}};return[()=>{R=m,E=N,S=new Map([["SEARCH",h],["ATTRACTIONS",y],["HOTELS",p],["RESTAURANTS",I]]),A=C,e({MIN_QUERY_LENGTH:1,default:G})},[e=>(t=e.useRef,a=e.useState,n=e.useCallback,i=e.useEffect),e=>(r=e.useRoute,u=e.usePageviewUid),e=>(o=e.default,s=e.useLocale),e=>d=e.useUserId,e=>c=e.useQuery,e=>T=e.useInteractionLogger,e=>y=e.default,e=>p=e.default,e=>I=e.default,e=>h=e.default,e=>O=e.default,e=>g=e.jsx]]},["1o4yt4","fgwvq1","17thqz","52far5","1mqwhq","32pwc7","s1ymgp","1c5q3i","o3mm96","1qx89h","j1i9fl","121h32"]]);

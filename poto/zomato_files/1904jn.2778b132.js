(this.$WP=this.$WP||[]).push(["1904jn",(e,t)=>{"use strict";var a,n,r,o,l,u,i,s,c,d,v,m,g,p,f,I,h,C,D,E,b,T,y,P,w,G,M,S,N,R,_,L,k,q=["IB_CLICK","CLICKOUT","ENTER_DATES"],A={enabled:!0,scriptSrcPath:"/static/gtm/gtm.html",scriptSrcHostDomain:"https://www.jscache.com",scriptSrcQueryParams:"",monitoringEnabled:!0},U={MOBILE:2e3,TABLET:2e3,DESKTOP:2e3},H={},O={},$=e=>e.startsWith("hare")||e.match("\\.qa.tripadvisor-preview-?")?w:G,W=e=>{var[t,a]=n(!1);return r((()=>{var t=setTimeout((()=>a(!0)),e);return()=>clearTimeout(t)}),[e]),t},x=()=>{var[e,t]=n(!1);return r((()=>{var e,a=C((a=>{null!=a?t(!0):e=requestIdleCallback((()=>t(!0)))}));return()=>{e&&cancelIdleCallback(e),a&&D(a)}}),[]),e},K=e=>{var t=S(),a=h(),n=p(f.TARGETING),r=M(H[e]||U[a]||2e3);return n&&(t||r)},j=()=>{var e;return null==(e=R)?void 0:e.port1},B=e=>(r((()=>{e||R&&(R=new MessageChannel)}),[e]),R),Q=()=>{var[e,t]=n("");return r((()=>{t(window.location.origin)}),[]),e},F={__key:0xb08df8f3475e,id:"b08df8f3475ef00068f577e8491be130",loc:{},definitions:[]},V=()=>{var e=(()=>{var e,t=(e=b(),a.useCallback(((t,a)=>{var n=a?{locationId:a,eventType:t,isGeoPage:!0}:{eventType:t,isGeoPage:!1};return e.query(F,n).toPromise().then((({data:e})=>{var t,a,n,r,o,l,u,i,s,c,d,v,m,g,p,f,I,h,C;return{audienceIds:(null==e||null==(t=e.gtmData)||null==(a=t.audienceIds)?void 0:a.map((e=>e)))||void 0,ipAddressCountry:(null==e||null==(n=e.gtmData)?void 0:n.ipAddressCountry)||void 0,regionName:(null==e||null==(r=e.gtmData)||null==(o=r.locationData)?void 0:o.regionName)||void 0,regionId:null==e||null==(l=e.gtmData)||null==(u=l.locationData)?void 0:u.regionId,countryName:(null==e||null==(i=e.gtmData)||null==(s=i.locationData)?void 0:s.countryName)||void 0,countryId:null==e||null==(c=e.gtmData)||null==(d=c.locationData)?void 0:d.countryId,locationHierarchy:(null==e||null==(v=e.gtmData)||null==(m=v.locationData)?void 0:m.locationHierarchy)||void 0,stateId:null==e||null==(g=e.gtmData)||null==(p=g.locationData)?void 0:p.stateId,stateName:(null==e||null==(f=e.gtmData)||null==(I=f.locationData)?void 0:I.stateName)||void 0,cityName:(null==e||null==(h=e.gtmData)||null==(C=h.locationData)?void 0:C.cityName)||void 0}}))}),[e])),u=(()=>{var e,[t,a]=n(""),l=(e=(e,t)=>new Promise(((a,n)=>{var r=()=>{o()},o=I(e,(()=>{a(`:${e.toLowerCase()}:`),t.removeEventListener("abort",r)}),(()=>{n(),t.removeEventListener("abort",r)}));t.addEventListener("abort",r)})),o((t=>Promise.allSettled([e(f.TARGETING,t),e(f.PERFORMANCE,t),e(f.FUNCTIONAL,t)])),[]));return r((()=>{var e=!0,t=new AbortController;return l(t.signal).then((t=>{e&&(e=>{var t="";e.forEach((e=>{"fulfilled"===e.status&&(t+=e.value)})),a(t)})(t)})),()=>{e=!1,t.abort()}}),[l]),t})(),i=(()=>{var e=v(),t=E(),a=h(),{page:n,params:r,path:l}=e,u="detailId"in r?r.detailId:void 0,i="geoId"in r?r.geoId:void 0,s=u||i||void 0;return o((()=>{var e=document.referrer;return{page:n,locationId:s,geoId:i,devicePlatform:a,locale:t,path:l,referringUrl:e}}),[a,i,t,s,n,l])})(),s=S(),c=l(!1),d=l([]),m=l(""),g=l([]),p=o((e=>{var t=i();return{event:e.event,data:{...t,...e.data,consent:m.current}}}),[i]),C=o(((e,t=!1)=>{if(l=e.event,q.includes(l)||t){var a;null==(a=j())||a.postMessage(e)}else{var n,r,o={...e,event:`${e.event}_HIGH_PRIORITY`};null==(n=j())||n.postMessage(o),c.current?null==(r=j())||r.postMessage(e):g.current.push(e)}var l}),[]),D=o((e=>new Promise((a=>{var{locationId:n}=e.data;t(e.event,n).then((t=>{var n={event:e.event,data:{...e.data,...t}};a(n)}))}))),[t]),T=o((e=>{var t=p(e);(e=>{switch(e){case"IB_CLICK":case"CLICKOUT":case"PAGEVIEW":return!0;default:return!1}})(e.event)?D(t).then((e=>{C(t=e)})):C(t)}),[p,D,C]),y=o((e=>{0!==m.current.length?T(e):d.current.push(e)}),[T]);return r((()=>{s&&(c.current=s,g.current.forEach((e=>C(e,!0))),g.current=[])}),[s,C]),r((()=>{m.current=u,m.current.length>0&&(d.current.forEach((e=>y(e))),d.current=[])}),[u,y]),y})();return o((t=>{e(t)}),[e])},z=e=>{var t=m(),n=T(),r=L(),o=a.useRef(n);a.useEffect((()=>{var t,a;if(e){var n,l,u=null==(l=g.get("pbjs_identitylink"))||null==(n=l.envelope)?void 0:n.envelope;r({event:"PAGEVIEW",data:{liveRampEnvelope:u,startDate:null==(t=o.current.hotels)?void 0:t.checkInDate.toLocaleDateString("en-US"),endDate:null==(a=o.current.hotels)?void 0:a.checkOutDate.toLocaleDateString("en-US")}})}}),[r,t,e])},X={__key:74850207404379,id:"44136c06115b0e6638f1de27d15da1e5",loc:{},definitions:[]},Y=()=>{var e,t,a,n=l(null),g=s(),p=Y.getGtmConfig(g),f=_(),I=(e=p,(t=f)?`${e.scriptSrcHostDomain}${e.scriptSrcPath}?gtmParams=${e.scriptSrcQueryParams}&parentDomain=${encodeURIComponent(t)}`:null),{page:h}=v(),C=Y.useDeferGtm(h),D=u((()=>((e,t)=>e.enabled&&!O[t])(p,h)),[p,h])&&C&&!!I,E=(a=b(),o(((e,t)=>{var{event:n}=e,r={page:t,event:n,pixelMetrics:e.tagMetrics.map((e=>({id:e.id,name:e.name,status:e.status,executionTime:e.executionTime})))};a.query(X,{request:r}).toPromise()}),[a])),T=o((e=>{p.monitoringEnabled&&E(e.data,h)}),[E,h,p.monitoringEnabled]);((e,t)=>{var a=m(),n=L();r((()=>{e&&n({event:"GTM_KPI_EXPERIMENT",data:{page:t}})}),[t,n,e,a])})(D,h);var P=B(D),w=o((()=>{n.current&&n.current.contentWindow&&P&&(P.port1.onmessage=T,n.current.contentWindow.postMessage("initGTMMessagePort",p.scriptSrcHostDomain,[P.port2]))}),[p.scriptSrcHostDomain,T,P]);return k(D),u((()=>D?y(c,{component:d.gtm,children:y(i,{src:I,title:"gtm",ref:n,style:{display:"none"},onLoad:w})}):null),[D,I,w])},J=e=>{var t=L(),n=m(),r=a.useRef(e);P(r.current,e)||(r.current=e);var o=r.current;a.useEffect((()=>{t(r.current)}),[o,t,n])};return[()=>{w={...A,scriptSrcQueryParams:encodeURIComponent("&gtm_auth=bQdYCwDudXrwbnRzFG9SEg&gtm_preview=env-3&gtm_cookies_win=x")},G={...A},M=W,S=x,N=K,R="undefined"!=typeof MessageChannel?new MessageChannel:null,_=Q,L=V,k=z,Y.useDeferGtm=N,Y.getGtmConfig=$,e({GoogleTagManager:Y,useGTMCallback:L,useGTMPageview:J})},[e=>(a=e,n=e.useState,r=e.useEffect,o=e.useCallback,l=e.useRef,u=e.useMemo),e=>i=e.EmbeddedContent,e=>s=e.useDomainName,e=>(c=e.default,d=e.Component),e=>(v=e.useRoute,m=e.usePageviewUid),e=>g=e.default,e=>(p=e.useConsent,f=e.CategoriesEnum,I=e.requestConsent),e=>h=e.useViewportCategory,e=>(C=e.requestTTICallback,D=e.cancelTTICallback),e=>E=e.useLocale,e=>b=e.useClient,e=>T=e.useTravelInfo,e=>y=e.jsx,e=>P=e.default]]},["1o4yt4","dyfdn5","qlcuu5","16nmgr","fgwvq1","19b9b1","1973cc","1ys6v1","gbnboa","17thqz","1mqwhq","1etaac","121h32","b5nukb"]]);

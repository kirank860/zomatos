(this.$WP=this.$WP||[]).push(["poggee",(e,r)=>{"use strict";var o,t,i,a,n,l,d,s,u,c,p,v,m,g,h,f,I,T,b,w=({loggedInUserId:e,args:{title:r,scrollToReference:n},onClose:l,loading:d,data:s,error:u,isIOSSafari:c})=>{var g=s&&s.tripsGetOne,f=g&&h(g,e),b=o((()=>{window.location.reload(!0)}),[]);t((()=>{f&&b()}),[f,b]),t((()=>{d||g||!u||(console.error("A service error occurred in the TripModal query",u),b())}),[d,g,u,b]);var[w,y]=i(!1);return I(v,{title:!w&&r,onClose:l,children:I(p,{onError:b,errorRenderer:()=>I(m,{}),children:I(a,{fallback:I(m,{}),children:!g||d||f?I(m,{}):I(T,{trip:g,scrollToReference:n,onMobileMapMaximized:c?y:void 0})})})})},y=e=>{var r=e.args.id,o=({variables:{tripId:e}})=>e===r?"invalidateAndRefetch":"validate",[t]=f({query:g,variables:{tripId:r,socialReference:!0}},{addItemToTrip:o,tripsRemoveItem:o,tripsRemoveReference:o,updateTrip:o,organizeTrip:o,addTripItemComment:o,updateTripComment:o,tripsCommentsRemoveOne:o});return I(w,{...e,loading:t.fetching,data:t.data,error:t.error})},C=()=>{var{route:{tripModal:e,isBoosted:r,...t},navigate:i}=l(s),a=d((()=>{if(e&&"object"==typeof e&&e.id)return{tripId:e.id}}),[e]),n=o((()=>{var e,r;null!=(null==(e=window)||null==(r=e.history)?void 0:r.state)?(document.dispatchEvent(new CustomEvent("modalClosingEvent")),window.history.back()):i(t)}),[i,t]);return a?I(u.Provider,{value:a,children:I(b,{args:e,onClose:n})}):null};return[()=>{T=n((()=>r("u311h0"))),b=c((e=>({loggedInUserId:e.auth.loggedInUserId,isIOSSafari:"SAFARI"===e.meta.device.browser.family&&"IOS"===e.meta.device.os.family})))(y),e("default",C)},[e=>(o=e.useCallback,t=e.useEffect,i=e.useState,a=e.Suspense,n=e.lazy,l=e.useContext,d=e.useMemo),e=>s=e.RouteContext,e=>u=e.SponsorshipTrackingContext,e=>c=e.connect,e=>p=e.ErrorBoundary,e=>(v=e.TripModalViewLayout,m=e.TripDetailSkeletonLoader),e=>g=e.GetFullTrip,e=>h=e.isTripUser,e=>f=e.useInvalidatableQuery,e=>I=e.jsx]]},["1o4yt4","bvvaww","1k7dpq","12mj4n","nbuwox","1t5lgq","ag9b0s","1iyqcw","1fbuhs","121h32"]]);

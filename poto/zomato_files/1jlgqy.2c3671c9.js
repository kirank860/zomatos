(this.$WP=this.$WP||[]).push(["1jlgqy",(e,i)=>{"use strict";var a,n,l,t,r,u,o,d,s,g,c,m,h,p,b,v,f,I,C="diningClub.modalAd.hasBeenDisplayed",w=[{url:"/img2/gemini/dining-club-ads/crave-fsihbar-modal-ad.jpg",width:334,height:500},{url:"/img2/gemini/dining-club-ads/crave-fsihbar-modal-ad-2x.jpg",width:667,height:1e3}],y=[{url:"/img2/gemini/dining-club-ads/il-pastaiola-modal-ad-1x.jpg",width:334,height:500},{url:"/img2/gemini/dining-club-ads/il-pastaiola-modal-ad-2x.jpg",width:667,height:1e3}],M=()=>{var e,[i,t]=a(!1),{localize:w}=o(),{data:y}=g(),M=d(),N="Restaurant_Review"===M.page||"Restaurants"===M.page?M.params.geoId:void 0,O=s(),[P,R]=a(!1),{data:$,fetching:_}=c(N),{primaryLocation:j,count:A}=(null==$?void 0:$[0])||{},D=!(null==$||!$.length),S=(null==j||null==(e=j.locationInformation)?void 0:e.name)||"",W=null==j?void 0:j.locationId,q=h(A,5);n((()=>{var e=("undefined"==typeof document?"":document.referrer).includes("tripadvisor"),i=!0!==u.get(`${C}_${W}`);R(!_&&i&&e)}),[W,_]);var x=null!=N?`/DiningClub?locationId=${N}`:"/DiningClub",{open:z}=r((({close:e})=>p(l,{children:p(I,{onClose:e,onActionClick:e,redirectUrl:x,restaurantsCount:q,price:y.priceString,oldPrice:y.originalPriceString,geoName:W===+m.NEW_YORK?w.string("gemini.b2c.dining.club.shelf_ad.locations.nyc"):S,restaurantName:v.get(Number(W))||"",imageSource:f.get(Number(W))})})),{onOpen:()=>{t(!0),u.set(`${C}_${W}`,!0,b)}},[N,W]);return n((()=>{!i&&P&&D&&A&&!O&&!_&&z()}),[_,i,z,P,D,A,O]),null};return[()=>{b=864e5,v=new Map([[+m.NEW_YORK,"Crave Fishbar"],[+m.MIAMI,"Il Pastaiola"]]),f=new Map([[+m.NEW_YORK,w],[+m.MIAMI,y]]),I=t((()=>i("vk4594"))),e("default",M)},[e=>(a=e.useState,n=e.useEffect,l=e.Suspense,t=e.lazy),e=>r=e.useVDOMPortal,e=>u=e.default,e=>o=e.useLocalize,e=>d=e.useRoute,e=>s=e.useIsDiningClubMemberLoggedIn,e=>g=e.useProductDetails,e=>c=e.useAvailableGeo,e=>(m=e.LOCATIONS,h=e.roundCounter),e=>p=e.jsx]]},["1o4yt4","14euae","19b9b1","17thqz","fgwvq1","1cwn4k","1mhqyg","i26scm","pe9247","121h32"]]);

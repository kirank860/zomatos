(this.$WP=this.$WP||[]).push(["7l6raj",(e,t)=>{"use strict";var r,a,i,n,o,h=[".jpg",".jpeg",".gif",".png"],s=[".mp4",".m4v",".mov"],d=e=>{var t;return e.forEach((e=>{t?t.width*t.height<e.width*e.height&&(t=e):t=e})),t},g=(e,t,r)=>{var a=Math.max(e,t);return Math.min(a,r)},u=e=>{var t="ta_video";return e&&("Home"===e.page?t="home_video":"Profile"===e.page&&(t="profile_video")),t},c=([e,t,r],a)=>{var i=e+(t?t/60:0)+(r?r/3600:0);return a<0?-i:i},l=(e,r)=>{var a=document.createElement("img");a.onload=function(){t("102o66").then((function(e){return e.e})).then((e=>{e.getData(this,(function(){var t=e.getTag(this,"GPSLatitude"),a=e.getTag(this,"GPSLatitudeRef"),i=n.get(a),h=e.getTag(this,"GPSLongitude"),s=e.getTag(this,"GPSLongitudeRef"),d=o.get(s);if(t&&i&&h&&d){var g=c(t,i),u=c(h,d);r({latitude:g,longitude:u})}}))}))};var i=document.createAttribute("src");i.value=e,a.setAttributeNode(i)},v=(e,t)=>{var r=new Image;r.onload=function(){t(new i(this.width,this.height))},r.src=e},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=e=>{var t="",r="",a="",i="",n="",o="",h=0,s=[];do{t=f.indexOf(e.charAt(h++))<<2|(i=f.indexOf(e.charAt(h++)))>>4,r=(15&i)<<4|(n=f.indexOf(e.charAt(h++)))>>2,a=(3&n)<<6|(o=f.indexOf(e.charAt(h++))),s.push(t),64!==n&&s.push(r),64!==o&&s.push(a),t="",r="",a="",i="",n="",o=""}while(h<e.length);return s},p=(e,t,r)=>{var a=`data:${r};base64,`;if(!e.match(a))return t;var i=e.replace(a,"");if(/[^A-Za-z0-9+/=]/g.exec(i))return t;var n=(e=>{var t=0,r=[];do{if(255===e[t]&&218===e[t+1])break;if(255===e[t]&&216===e[t+1])t+=2;else{var a=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,a);r.push(i),t=a}}while(t<=e.length);return r})(m(i));return a+(e=>{var t="",r="",a="",i="",n="",o="",h="",s="",d=0;do{n=(r=e[d++])>>2,o=(3&r)<<4|(a=e[d++])>>4,h=(15&a)<<2|(i=e[d++])>>6,s=63&i,isNaN(a)?(h=64,s=64):isNaN(i)&&(s=64),t=`${t}${f.charAt(n)}${f.charAt(o)}${f.charAt(h)}${f.charAt(s)}`,r="",a="",i="",n="",o="",h="",s=""}while(d<e.length);return t})(((e,t)=>{var r=(e=>{for(var t,r=0;r<e.length;r++)if(255===(t=e[r])[0]&&225===t[1])return t;return[]})(t),a=((e,t)=>{var r=m(e),a=r.indexOf(255,3),i=r.slice(0,a),n=r.slice(a);return i.concat(t).concat(n)})(e,r);return new Uint8Array(a)})(t.replace(a,""),n))},w={__key:55547005080832,id:"32850b819500e3a60adb4542de5ec9d2",loc:{},definitions:[]},U=e=>{for(var t=atob(e.split(",")[1]),r=[],a=0;a<t.length;)r.push(t.charCodeAt(a)),a+=1;return new Uint8Array(r)},A=(e,t,r,a,i,n)=>{var o=document.createElement("canvas");return o.width=i,o.height=n,o.getContext("2d").drawImage(e,r,a,i,n,0,0,i,n),"image/png"===t?o.toDataURL():o.toDataURL("image/jpeg")},y=(e,t,r,a)=>{var i=new Image;i.onload=()=>{var e=document.createElement("canvas");e.width=90===Math.abs(t%180)?i.height:i.width,e.height=90===Math.abs(t%180)?i.width:i.height;var n=e.getContext("2d");n.save(),n.translate(e.width/2,e.height/2),n.rotate(t*Math.PI/180),n.drawImage(i,-i.width/2,-i.height/2),n.restore(),a(e.toDataURL(r))},i.src=e},R=e=>1===e?0:8===e?270:3===e?180:6===e?90:0,b=(e,t,r)=>{var a=new FileReader;a.onload=()=>{if(t&&("CHROME"===t.family&&t.majorVersion>=81||"SAFARI"===t.family))return r(-1);if(!(a.result instanceof ArrayBuffer))return r(-1);var e=new DataView(a.result);if(65496!==e.getUint16(0,!1))return r(-2);for(var i=e.byteLength,n=2;n<i;){if(e.getUint16(n+2,!1)<=8)return r(-1);var o=e.getUint16(n,!1);if(n+=2,65505===o){if(n+=2,1165519206!==e.getUint32(n,!1))return r(-1);var h=18761===e.getUint16(n+=6,!1);n+=e.getUint32(n+4,h);var s=e.getUint16(n,h);n+=2;for(var d=0;d<s;d++)if(274===e.getUint16(n+12*d,h))return r(e.getUint16(n+12*d+8,h))}else{if(65280!=(65280&o))break;n+=e.getUint16(n,!1)}}return r(-1)},a.readAsArrayBuffer(e)},L=(e,t,r)=>{b(e,t,(t=>{var a=R(t);if(0===a)r(URL.createObjectURL(e));else{var i=new FileReader;i.onload=()=>{var t=i.result&&i.result.toString()||"",n=e.type,o=URL.createObjectURL(e);y(o,a,n,(e=>{URL.revokeObjectURL(o);var a=e;try{a=p(t,a,n)}catch(e){}var i=new Blob([U(a)],{type:n});r(URL.createObjectURL(i))}))},i.readAsDataURL(e)}}))},x=(e,t,r,a)=>{var i=new FileReader;i.onload=()=>{var e=i.result&&i.result.toString()||"",n=p(e,t,r);a(n)},i.readAsDataURL(e)},P=(e,t,r,a,i)=>{e?fetch(e,{method:"GET",credentials:"same-origin"}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e})).then((e=>e.blob())).then((e=>{b(e,a,(a=>{var n=R(a);0===n?x(e,t,r,i):y(t,-n,r,(t=>{x(e,t,r,i)}))}))})).catch((e=>{i(t)})):i(t)},T=e=>h.includes(r(e))?"photo":s.includes(r(e))?"video":"unknown",I=(e,t,r,a,i)=>{t>r?i():setTimeout((()=>{a.query(w,{id:e},{requestPolicy:"network-only"}).toPromise().then((n=>{if(n.data&&n.data.photos&&n.data.photos[0]){var{statuses:o}=n.data.photos[0];o&&0!==o.length&&!o.includes("UPLOADING")?i():I(e,t+1,r,a,i)}else I(e,t+1,r,a,i)}))}),1e3)};return[()=>{e("Point",a=class{constructor(e,t){this.x=void 0,this.y=void 0,this.distanceFrom=e=>Math.sqrt((this.x-e.x)**2+(this.y-e.y)**2),this.x=e,this.y=t}}),e("Dimension",i=class{constructor(e,t){this.width=void 0,this.height=void 0,this.equals=e=>e&&this.width===e.width&&this.height===e.height,this.aspectRatio=()=>this.width/this.height,this.width=e,this.height=t}}),n=new Map([["N",1],["S",-1]]),o=new Map([["E",1],["W",-1]]),e({Dimension:i,Point:a,base64ToUint8Array:U,boundNumber:g,checkMediaReady:I,cropImageToJpegUrl:A,getGeoPointFromExif:l,getImageDimensions:v,getSizeWithMostPixels:d,getVideoTrackingModule:u,mediaType:T,orientationValueToDegrees:R,photoOrientation:b,restoreExifAndRotateIfNeeded:P,rotateImageIfNeeded:L,supportedImageTypes:h,supportedVideoTypes:s})},[e=>r=e.fileExtension]]},["714tj5"]]);

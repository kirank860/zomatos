(this.$WP=this.$WP||[]).push(["19enkn",(e,s)=>{"use strict";var t,r,i,o,a,c,n,l,p,d,u,h,_,g,v,m,f,b,P,I,y,S,z,j,w,k,R,T,q,C=e=>{var{localize:s}=d();return P(w,{...e,localize:s})},L={__key:0xa23b9ec94aac,id:"a23b9ec94aac6455666395f7576046d0",loc:{},definitions:[]},x=(e,s)=>{var t=s in z,[{data:r,fetching:i,error:o}]=j({query:L,variables:{socialObjects:[{objectId:String(e),objectType:S[s]}]},executeWhen:t?"afterInvalidation":"never"},{createRepost:t=>String(t.refId)===String(e)&&t.refType===S[s]?"invalidateAndRefetch":"validate"});return!i&&!o&&r&&r.socialStatistics&&r.socialStatistics.length&&r.socialStatistics[0]||null},M=e=>{if(e&&e.blockStatus){var{blockStatus:s}=e;if(s&&(s.isBlocking||s.isBlockingYou))return!1}return!0},N=e=>{var s,t,c,{localize:n}=d(),f=r(),{feedSectionItem:b}=e.repostPreviewProps,S=(null==(s=e.originalRepostReference)?void 0:s.id)||b.object.id||b.object.mediaBatchId||b.object.postId,z=(null==(t=e.originalRepostReference)?void 0:t.type)||b.object.__typename,j=R(S,z),w=j?j.isReposted:e.socialStatistics&&e.socialStatistics.isReposted,[q,C]=i(!1),{styleAsShareListItem:L,openRepostModalAsLocal:x}=e,N=o(void 0),U=(e,s,t)=>{N.current&&N.current(e,s,t)},B=()=>!(!M(e.actor)||e.repostPreviewProps&&!M(e.repostPreviewProps.actor))||("function"==typeof N.current&&N.current(z,"no_permission"),!1),{loggedInUserId:W,...A}=e;if(!e.repostPreviewProps.member&&W){var O=[{id:e.loggedInUserId}];c=P(l,{query:_,variables:{userIds:O},children:({data:s})=>{var{memberProfiles:t=null}=s||{},r=t?t[0]:null,i={...e.repostPreviewProps};return i.member=r,A.repostPreviewProps=i,P(a,{children:q&&P(T,{...A,modalName:f,repostCallback:U})})}})}else c=P(a,{children:q&&P(T,{...A,modalName:f,repostCallback:U})});return I(y,{children:[P(g,{pid:40434,children:s=>P(h,{name:f,local:x,children:t=>P(m,{children:r=>I("span",{onClick:i=>{w||(C(!0),e.onClick&&e.onClick(),u.isNativeWebview()?S&&z&&u.postToBridge("repost",1,{objectId:S,type:z}):(r(i,"repost"),s().then(B).then((e=>{e&&t()}))))},className:p(L?"yDrwH S4 H3 Pd PU Pq PG _S":"hqtxV _T M _S",{Drwfi:w}),children:[P(v,{name:"repost",className:"tCmOp"}),P("span",{className:"ui_link gWJYL socialCTA",children:n(w?"reposted":L?"social_repost_on_tripadvisor":"social_repost")})]})})})}),c,P(k,{children:e=>{N.current=e}})]})};return[()=>{w=class extends t{constructor(...e){super(...e),this.successToastMessage={Review:this.props.localize.string("success_repost_review"),Photo:this.props.localize.string("success_repost_photo"),Video:this.props.localize.string("success_repost_video"),ForumPost:this.props.localize.string("success_repost_forum"),LinkPost:this.props.localize.string("success_repost_link"),Trip:this.props.localize.string("success_repost_trip"),MediaBatch:this.props.localize.string("success_repost_photos")}}createToast(e,s,t){switch(s){case"success":return{node:this.successToastMessage[e],cta:P(f,{href:t?`/Profile/${t}`:"/Profile",to:{page:"Profile",username:t},children:this.props.localize("view_repost")})};case"error":return{node:this.props.localize("repost_failure_message")};case"rate_limited":return{node:this.props.localize("repost_rate_limited_v2")};case"no_permission":return{node:this.props.localize("social_no_permission")};default:return{node:""}}}render(){return P(b,{children:e=>this.props.children(((s,t,r)=>{e(this.createToast(s,t,r))}))})}},k=C,R=x,T=c((()=>s("1jbseo"))),q=n((e=>({loggedInUserId:e.auth.loggedInUserId})))(N),e({RepostAction:q,useUpdatedRepostStats:R})},[e=>(t=e.Component,r=e.useId,i=e.useState,o=e.useRef,a=e.Suspense,c=e.lazy),e=>n=e.connect,e=>l=e.Query,e=>p=e.default,e=>d=e.useLocalize,e=>u=e.NativeBridge,e=>h=e.Opener,e=>_=e.ProfileQueryWithUserId,e=>g=e.SocialLoginGate,e=>v=e.Icon,e=>m=e.InteractionLogger,e=>f=e.Link,e=>b=e.Toaster,e=>(P=e.jsx,I=e.jsxs,y=e.Fragment),e=>(S=e.SocialObjectTypeMap,z=e.RepostedObjectTypeMap),e=>j=e.useInvalidatableQuery]]},["1o4yt4","12mj4n","1mqwhq","fkji80","17thqz","10of6q","80hn7v","1jz56j","10506z","1ybxsm","yc8qq2","bvvaww","1iw69p","121h32","1nev0g","1fbuhs"]]);
